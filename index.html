<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title data-i18n="appTitle">üé¨ –†–µ–¥–∞–∫—Ç–æ—Ä —Å—É–±—Ç–∏—Ç—Ä–æ–≤ PRO</title>
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/themes.css" />
    <link rel="stylesheet" href="modules/formatting.css" />
  </head>
  <body data-theme="light">
    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div class="modal fade" id="searchReplaceModal" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" data-i18n="searchReplace">
              –ü–æ–∏—Å–∫ –∏ –∑–∞–º–µ–Ω–∞
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –±—É–¥–µ—Ç –≤ search-replace.js -->
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="timeShiftModal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" data-i18n="timeShift">
              –°–¥–≤–∏–≥ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –±—É–¥–µ—Ç –≤ time-tools.js -->
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="importModal" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">–ò–º–ø–æ—Ä—Ç —Ç–µ–∫—Å—Ç–∞</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <div class="mb-3">
              <label class="form-label"
                >–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç (–∫–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ - –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å—É–±—Ç–∏—Ç—Ä):</label
              >
              <textarea
                id="importTextArea"
                class="form-control"
                rows="10"
                placeholder="–ü–µ—Ä–≤–∞—è —Ñ—Ä–∞–∑–∞&#10;–í—Ç–æ—Ä–∞—è —Ñ—Ä–∞–∑–∞&#10;–¢—Ä–µ—Ç—å—è —Ñ—Ä–∞–∑–∞"
              ></textarea>
            </div>
            <div class="row">
              <div class="col-md-6">
                <label class="form-label">–ù–∞—á–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è (—Å–µ–∫—É–Ω–¥—ã):</label>
                <input
                  type="number"
                  id="startTimeInput"
                  class="form-control"
                  value="0"
                  min="0"
                  step="1"
                />
              </div>
              <div class="col-md-6">
                <label class="form-label"
                  >–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–≥–æ —Å—É–±—Ç–∏—Ç—Ä–∞ (—Å–µ–∫—É–Ω–¥—ã):</label
                >
                <input
                  type="number"
                  id="durationInput"
                  class="form-control"
                  value="3"
                  min="1"
                  step="0.5"
                />
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              –û—Ç–º–µ–Ω–∞
            </button>
            <button type="button" class="btn btn-primary" id="confirmImport">
              –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="container-fluid h-100 p-0">
      <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
      <div
        class="d-flex justify-content-between align-items-center p-3 border-bottom"
      >
        <h4 class="mb-0" data-i18n="appTitle">üé¨ –†–µ–¥–∞–∫—Ç–æ—Ä —Å—É–±—Ç–∏—Ç—Ä–æ–≤ PRO</h4>
        <div class="d-flex gap-2">
          <button class="btn btn-sm btn-secondary" id="themeToggle">
            <i class="bi bi-moon"></i> –¢–µ–º–∞
          </button>
          <select
            id="languageSelect"
            style="width: auto"
          >
            <option value="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</option>
            <option value="en">üá∫üá∏ English</option>
            <option value="es">üá™üá∏ Espa√±ol</option>
          </select>
        </div>
      </div>

      <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
      <div class="row g-0 h-100">
        <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - –í–∏–¥–µ–æ -->
        <div
          class="col-md-4 d-flex flex-column border-end"
          style="height: calc(100vh - 80px)"
        >
          <!-- –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ (—Å–≤–æ—Ä–∞—á–∏–≤–∞–µ–º–∞—è –ø–∞–Ω–µ–ª—å) -->
          <div class="p-3 border-bottom">
            <div class="d-flex justify-content-between align-items-center mb-2">
              <h6 class="mb-0">–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤</h6>
              <button
                class="btn btn-sm btn-secondary"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#fileUploadPanel"
              >
                <i class="bi bi-chevron-up"></i>
              </button>
            </div>
            <div class="collapse show" id="fileUploadPanel">
              <div class="mb-2">
                <label class="form-label small fw-bold">üìπ –í–∏–¥–µ–æ—Ñ–∞–π–ª</label>
                <input
                  type="file"
                  id="videoFile"
                  class="form-control form-control-sm"
                  accept="video/*"
                />
              </div>
              <div class="mb-2">
                <label class="form-label small fw-bold">üìù –°—É–±—Ç–∏—Ç—Ä—ã</label>
                <input
                  type="file"
                  id="subtitleFile"
                  class="form-control form-control-sm"
                  accept=".srt,.ass,.vtt,.txt"
                />
              </div>
            </div>
          </div>

          <!-- –í–∏–¥–µ–æ–ø–ª–µ–µ—Ä -->
          <div class="flex-grow-1 p-3">
            <div
              id="playerContainer"
              class="d-none rounded-3 overflow-hidden shadow-sm bg-black position-relative"
            >
              <video id="videoPlayer" controls class="w-100 h-100">
                –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ —Ç–µ–≥.
              </video>
              <div id="subtitleOverlay" class="subtitle-overlay"></div>

              <!-- –ö–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞ –∏–∑ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ -->
              <button
                class="fullscreen-btn"
                onclick="window.videoPlayer.toggleFullscreen()"
                title="–í—ã–π—Ç–∏ –∏–∑ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ (F –∏–ª–∏ Esc)"
              >
                <i class="bi bi-fullscreen-exit"></i>
              </button>

              <div id="videoLoading" class="video-loading">
                <div class="spinner-border text-light" role="status">
                  <span class="visually-hidden">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                </div>
                <div class="mt-2 text-light">–ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ...</div>
              </div>

              <!-- –£–ª—É—á—à–µ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
              <div class="video-controls">
                <div class="d-flex justify-content-between align-items-center">
                  <div class="d-flex gap-2">
                    <button
                      class="btn btn-sm btn-light"
                      onclick="videoSeek(-5)"
                      title="–ù–∞–∑–∞–¥ 5—Å (‚Üê)"
                    >
                      <i class="bi bi-skip-backward"></i> 5—Å
                    </button>
                    <button
                      class="btn btn-sm btn-light"
                      onclick="videoSeek(5)"
                      title="–í–ø–µ—Ä–µ–¥ 5—Å (‚Üí)"
                    >
                      5—Å <i class="bi bi-skip-forward"></i>
                    </button>
                    <button
                      class="btn btn-sm btn-light"
                      onclick="addBookmark()"
                      title="–î–æ–±–∞–≤–∏—Ç—å –∑–∞–∫–ª–∞–¥–∫—É (B)"
                    >
                      <i class="bi bi-bookmark"></i>
                    </button>
                    <button
                      class="btn btn-sm btn-light"
                      onclick="window.videoPlayer.toggleFullscreen()"
                      title="–ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º (F)"
                    >
                      <i class="bi bi-arrows-fullscreen"></i>
                    </button>
                  </div>

                  <div class="d-flex gap-2 align-items-center text-white">
                    <select
                      class="form-select form-select-sm"
                      id="playbackRate"
                      style="width: auto"
                    >
                      <option value="0.5">0.5x</option>
                      <option value="0.75">0.75x</option>
                      <option value="1" selected>1x</option>
                      <option value="1.25">1.25x</option>
                      <option value="1.5">1.5x</option>
                      <option value="2">2x</option>
                    </select>
                    <span id="currentTime">00:00</span> /
                    <span id="duration">00:00</span>
                  </div>
                </div>

                <!-- –ó–∞–∫–ª–∞–¥–∫–∏ -->
                <div id="bookmarksContainer" class="mt-2 d-none">
                  <div class="bookmarks-list"></div>
                </div>
              </div>
            </div>
            <!-- –ö–Ω–æ–ø–∫–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞ –ø–æ–¥ –≤–∏–¥–µ–æ -->
            <div class="mt-3 d-grid gap-2">
              <button id="exportSrt" class="btn btn-success btn-lg">
                <i class="bi bi-download me-2"></i> –≠–∫—Å–ø–æ—Ä—Ç SRT
              </button>
              <button id="exportAss" class="btn btn-info btn-lg">
                <i class="bi bi-download me-2"></i> –≠–∫—Å–ø–æ—Ä—Ç ASS
              </button>
            </div>
          </div>
        </div>

        <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ - –†–µ–¥–∞–∫—Ç–æ—Ä —Å—É–±—Ç–∏—Ç—Ä–æ–≤ -->
        <div
          class="col-md-8 d-flex flex-column"
          style="height: calc(100vh - 80px)"
        >
          <!-- –ü–∞–Ω–µ–ª—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ -->
          <div class="p-3 border-bottom">
            <div class="d-flex justify-content-between align-items-center mb-2">
              <h6 class="mb-0">–†–µ–¥–∞–∫—Ç–æ—Ä —Å—É–±—Ç–∏—Ç—Ä–æ–≤</h6>
              <button  class="btn btn-sm btn-secondary"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#toolsPanel"
              >
                <i class="bi bi-chevron-up"></i>
              </button>
            </div>
            <div class="collapse show" id="toolsPanel">
              <div class="d-flex flex-wrap gap-2">
                <button id="addSubtitleRow" class="btn btn-primary btn-sm">
                  <i class="bi bi-plus-lg"></i> –î–æ–±–∞–≤–∏—Ç—å —Å—É–±—Ç–∏—Ç—Ä
                </button>

                <button
                  class="btn btn-warning btn-sm"
                  onclick="showTimeShiftModal()"
                >
                  <i class="bi bi-clock"></i> –°–¥–≤–∏–≥ –≤—Ä–µ–º–µ–Ω–∏
                </button>

                <button
                  class="btn btn-info btn-sm"
                  onclick="showSearchReplaceModal()"
                >
                  <i class="bi bi-search"></i> –ü–æ–∏—Å–∫/–ó–∞–º–µ–Ω–∞
                </button>

                <button class="btn btn-dark btn-sm" onclick="showHistory()">
                  <i class="bi bi-clock-history"></i> –ò—Å—Ç–æ—Ä–∏—è
                </button>

                <button id="importText" class="btn btn-warning btn-sm">
                  <i class="bi bi-text-paragraph"></i> –ò–º–ø–æ—Ä—Ç —Ç–µ–∫—Å—Ç–∞
                </button>
                <!-- –î–û–ë–ê–í–¨–¢–ï –≠–¢–ò –ö–ù–û–ü–ö–ò –ê–í–¢–û–°–û–•–†–ê–ù–ï–ù–ò–Ø -->
                <button id="restoreAutoSave" class="btn btn-warning btn-sm">
                  <i class="bi bi-arrow-clockwise"></i> –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
                </button>
                <button id="clearAutoSave" class="btn btn-danger btn-sm">
                  <i class="bi bi-trash"></i> –û—á–∏—Å—Ç–∏—Ç—å –∞–≤—Ç–æ—Å–µ–π–≤
                </button>
              </div>

              <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
              <div id="stats" class="alert alert-light d-none mt-2 mb-0">
                <div class="row text-center">
                  <div class="col">
                    <strong id="totalSubtitles">0</strong><br />
                    <small class="text-muted">–í—Å–µ–≥–æ —Å—É–±—Ç–∏—Ç—Ä–æ–≤</small>
                  </div>
                  <div class="col">
                    <strong id="totalDuration">0:00:00</strong><br />
                    <small class="text-muted">–û–±—â–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</small>
                  </div>
                  <div class="col">
                    <strong id="averageDuration">0:00:00</strong><br />
                    <small class="text-muted">–°—Ä–µ–¥–Ω—è—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</small>
                  </div>
                  <div class="col">
                    <strong id="totalCharacters">0</strong><br />
                    <small class="text-muted">–°–∏–º–≤–æ–ª–æ–≤</small>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- –¢–∞–±–ª–∏—Ü–∞ —Å—É–±—Ç–∏—Ç—Ä–æ–≤ -->
          <div class="flex-grow-1 position-relative">
            <div class="table-wrapper h-100">
              <table id="subtitleTable" class="table table-hover mb-0">
                <thead class="table-light sticky-top">
                  <tr>
                    <th
                      style="width: 4%"
                      class="text-center"
                      data-i18n="number"
                    >
                      ‚Ññ
                    </th>
                    <th style="width: 12%" data-i18n="start">–ù–∞—á–∞–ª–æ</th>
                    <th style="width: 12%" data-i18n="end">–ö–æ–Ω–µ—Ü</th>
                    <th
                      style="width: 8%"
                      class="text-center"
                      data-i18n="duration"
                    >
                      –î–ª–∏—Ç.
                    </th>
                    <th style="width: 15%" data-i18n="speaker">–ì–æ–≤–æ—Ä—è—â–∏–π</th>
                    <th data-i18n="text">–¢–µ–∫—Å—Ç</th>
                    <th
                      style="width: 12%"
                      class="text-center"
                      data-i18n="actions"
                    >
                      –î–µ–π—Å—Ç–≤–∏—è
                    </th>
                  </tr>
                </thead>
                <tbody id="subtitleTableBody">
                  <tr>
                    <td colspan="7" class="text-center text-muted py-5">
                      <i
                        class="bi bi-cloud-arrow-up display-4 d-block mb-2"
                      ></i>
                      –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª —Å—É–±—Ç–∏—Ç—Ä–æ–≤ –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- –°–∫—Ä–∏–ø—Ç—ã -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- –û–°–ù–û–í–ù–´–ï –ó–ê–ì–†–£–ó–ß–ò–ö–ò -->
    <script src="js/subtitle-loader.js"></script>
    <script src="js/player.js"></script>
    <!--—è–¥—Ä–æ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞-->
    <script src="js/editor.js"></script>
    <!-- –†–ï–î–ê–ö–¢–û–† -->
<script src="js/utilities.js"></script>
    <script src="js/subtitle-row.js"></script>
    <!-- –ú–û–î–£–õ–ò -->
    <script src="modules/speaker-manager.js"></script>
    <script src="modules/time-tools.js"></script>
    <script src="modules/search-replace.js"></script>
    <script src="modules/spell-checker.js"></script>
    <script src="modules/transliteration.js"></script>
    <script src="modules/theme-manager.js"></script>
    <script src="modules/video-controls.js"></script>
    <script src="modules/history-manager.js"></script>
    <script src="modules/language-manager.js"></script>
    <script src="modules/copy-time.js"></script>
    <script src="modules/time-jump.js"></script>


    <!-- <script src="modules/horizontal-scroll-actions.js"></script> -->
    <script src="modules/hybrid-actions.js"></script>
    <!-- <script src="modules/hybrid-actions-v2.js"></script> -->
    <!-- <script src="modules/compact-actions.js"></script> -->
    <!-- –≠–ö–°–ü–û–†–¢ -->
    <script src="js/export.js"></script>
  </body>
</html>
